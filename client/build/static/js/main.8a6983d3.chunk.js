(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(38)},29:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),s=a.n(o),c=(a(29),a(15)),i=a(2),l=a(3),m=a(5),u=a(4),h=a(6),d=a(1);function p(e){return r.a.createElement("div",{className:"homepage"},r.a.createElement("button",{type:"submit"},r.a.createElement(d.b,{to:"/comment"},"Comment")),r.a.createElement("button",{type:"submit"},r.a.createElement(d.b,{to:"/sighting"},"Sighting")),r.a.createElement("button",{type:"submit"},r.a.createElement(d.b,{to:"/search"},"Search")))}var f=a(16);function v(e){return e.hasError?r.a.createElement("div",{className:"error"},e.message):r.a.createElement(r.a.Fragment,null)}var g={API_ENDPOINT:"http://localhost:8000/api/restaurants",API_KEY:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_KEY,TOKEN_KEY:"blogful-client-auth-token"},E={saveAuthToken:function(e){window.localStorage.setItem(g.TOKEN_KEY,e)},getAuthToken:function(){return window.localStorage.getItem(g.TOKEN_KEY)},clearAuthToken:function(){window.localStorage.removeItem(g.TOKEN_KEY)},hasAuthToken:function(){return!!E.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))}},y=E,b={postLogin:function(e){return fetch("".concat(g.API_ENDPOINT,"/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},postUser:function(e){return fetch("".concat(g.API_ENDPOINT,"/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})}},w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:"null",name:"",password:"",nameValid:!1,passwordValid:!1,formValid:!1,validationMessages:{name:"",password:""}},a.handleSubmitJwtAuth=function(e){e.preventDefault(),a.setState({error:null});var t=e.target,n=t.user_name,r=t.password;b.postLogin({user_name:n.value,password:r.value}).then(function(e){n.value="",r.value="",y.saveAuthToken(e.authToken),a.props.onLoginSuccess()}).catch(function(e){a.setState({error:e.error})})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"updateName",value:function(e){var t=this;this.setState({name:e},function(){t.validateName(e)})}},{key:"updatePassword",value:function(e){var t=this;this.setState({password:e},function(){t.validatePassword(e)})}},{key:"validateName",value:function(e){var t=Object(f.a)({},this.state.validationMessages),a=!1;0===(e=e.trim()).length?(t.name="Name is required",a=!0):(t.name="",a=!1),this.setState({validationMessages:t,nameValid:!a},this.formValid)}},{key:"validatePassword",value:function(e){var t=Object(f.a)({},this.state.validationMessages),a=!1;0===(e=e.trim()).length?(t.password="Password is required",a=!0):(t.password="",a=!1),this.setState({validationMessages:t,passwordValid:!a},this.formValid)}},{key:"formValid",value:function(){this.setState({formValid:this.state.nameValid&&this.state.passwordValid})}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"login",onSubmit:function(t){return e.this.handleSubmitJwtAuth(t)}},r.a.createElement("h2",null,"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name *"),r.a.createElement("input",{type:"text",className:"registration__control",name:"name",id:"name",onChange:function(t){return e.updateName(t.target.value)}}),r.a.createElement(v,{hasError:!this.state.nameValid,message:this.state.validationMessages.name})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password *"),r.a.createElement("input",{type:"password",className:"registration__control",name:"password",id:"password",onChange:function(t){return e.updatePassword(t.target.value)}}),r.a.createElement("div",{className:"registration__hint"},"6 to 72 characters, must include a number"),r.a.createElement(v,{hasError:!this.state.passwordValid,message:this.state.validationMessages.password})),r.a.createElement("div",{className:"Login__button__group"},r.a.createElement("button",{type:"reset",className:"Login__button"},"Cancel"),r.a.createElement("button",{type:"submit",className:"Login__button",disabled:!this.state.formValid},r.a.createElement(d.b,{to:"/homepage"},"Save")," ")))}}]),t}(n.Component);w.defaultProps={onLoginSuccess:function(){}};var O=w,N=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.user_name,r=a.password;a.repeatPassword;b.postUser({user_name:n.value,password:r.value}).then(function(e){n.value="",r.value="",t.props.onRegistrationSuccess()}).catch(function(e){t.setState({error:e.error})})}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"registration",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("h2",null,"Register"),r.a.createElement("div",{className:"registration__hint"},"* required field"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"user_name"},"Name *"),r.a.createElement("input",{type:"text",className:"registration__control",name:"user_name",id:"user_name",onChange:function(t){return e.updateName(t.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password *"),r.a.createElement("input",{type:"password",className:"registration__control",name:"password",id:"password",onChange:function(t){return e.updatePassword(t.target.value)}}),r.a.createElement("div",{className:"registration__hint"},"6 to 72 characters, must include a number")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"repeatPassword"},"Repeat Password *"),r.a.createElement("input",{type:"password",className:"registration__control",name:"repeatPassword",id:"repeatPassword",onChange:function(t){return e.updateRepeatPassword(t.target.value)}}),r.a.createElement(v,{hasError:!this.state.passwordMatch,message:this.state.validationMessages.repeatPassword})),r.a.createElement("div",{className:"registration__button__group"},r.a.createElement("button",{type:"reset",className:"registration__button"},"Cancel"),r.a.createElement("button",{type:"submit",className:"registration__button",disabled:!this.state.formValid},r.a.createElement(d.b,{to:"/homepage"},"Save"))))}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={city:"",date:"",restaurants:[],restaurant:[]},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"cityChanged",value:function(e){this.setState({city:e})}},{key:"dateChanged",value:function(e){this.setState({date:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=["q=".concat(this.state.city),"filter=".concat(this.state.date)].join("&"),n="".concat("config.API_ENDPOINT","?").concat(a),r={method:"GET",body:JSON.stringify(),headers:{"Content-Type":"application/json"}};fetch(n,r).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later.");return e}).then(function(e){return e.json()}).then(function(e){t.setState({restaurants:e,error:null})}).catch(function(e){t.setState({error:e.message})})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"searchForm"},r.a.createElement("form",{className:"searchForm",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",{htmlFor:"sortByCity"},"Choose The City: "),r.a.createElement("select",{id:"city",name:"city",onChange:function(t){return e.props.cityChanged(t.target.value)}},r.a.createElement("option",{value:"New Jersey"},"New Jersey"),r.a.createElement("option",{value:"New York"},"New York"),r.a.createElement("option",{value:"Patomac"},"Patomac"),r.a.createElement("option",{value:"Orange County"},"Orange County"),r.a.createElement("option",{value:"Dallas"},"Dallas"),r.a.createElement("option",{value:"Atlanta"},"Atlanta"),r.a.createElement("option",{value:"Beverly Hills",selected:!0},"Beverly Hills")),r.a.createElement("label",{htmlFor:"sortByDate"},"Sort By Date: "),r.a.createElement("select",{id:"date",name:"date",onChange:function(t){return e.props.dateChanged(t.target.value)}},r.a.createElement("option",{value:"Most Recent"},"Most Recent"),r.a.createElement("option",{value:"Least Recent"},"Least Recent")),r.a.createElement("button",{type:"reset"},"Cancel"),r.a.createElement("button",{type:"submit"},r.a.createElement(d.b,{to:"/displayresults"},"Submit")))))}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comment:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"commentAdded",value:function(e){this.setState({comment:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.comment,n={method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(g.API_KEY)}};fetch("config.API_ENDPOINT",n).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){t.setState({comment:""}),t.props.handleAddComment(a)}).catch(function(e){t.setState({error:e.message})})}},{key:"render",value:function(){var e=this,t=this.state.error?r.a.createElement("div",{className:"error"},this.state.error):"";return r.a.createElement("div",{className:"addComment"},r.a.createElement(S,null),r.a.createElement("h2",null,"Add Comment"),t,r.a.createElement("form",{className:"addComment__form",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",{htmlFor:"comment"},"Comment: "),r.a.createElement("input",{type:"number",name:"comment",id:"comment",value:this.state.comment,onChange:function(t){return e.commentAdded(t.target.value)}}),r.a.createElement("div",{className:"addComment__buttons"},r.a.createElement("button",{type:"reset"},"Cancel"),r.a.createElement("button",{type:"submit"},"Save"))))}}]),t}(n.Component),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",city:"",nameOfHw:"",comments:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"nameChanged",value:function(e){this.setState({name:e})}},{key:"cityChanged",value:function(e){this.setState({city:e})}},{key:"commentChanged",value:function(e){this.setState({comment:e})}},{key:"nameOfHwChanged",value:function(e){this.setState({nameOfHw:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a,n={name:(a=this.state).name,city:a.city,comment:a.comment,nameOfHw:a.nameOfHw},r={method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(g.API_KEY)}};fetch("config.API_ENDPOINT",r).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){t.setState({name:"",city:"",comment:"",nameOfHw:""}),t.props.handleAddResto(n)}).catch(function(e){t.setState({error:e.message})})}},{key:"render",value:function(){var e=this,t=this.state.error?r.a.createElement("div",{className:"error"},this.state.error):"";return r.a.createElement("div",{className:"addSighting"},r.a.createElement("h2",null,"Add Sighting"),t,r.a.createElement("form",{className:"addSighting__form",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement("input",{type:"text",name:"name",id:"name",placeholder:"name",value:this.state.name,onChange:function(t){return e.nameChanged(t.target.value)}}),r.a.createElement("label",{htmlFor:"city"}," City: "),r.a.createElement("select",{id:"city",name:"city",onChange:function(t){return e.props.cityChanged(t.target.value)}},r.a.createElement("option",{value:"New Jersey"},"New Jersey"),r.a.createElement("option",{value:"New York"},"New York"),r.a.createElement("option",{value:"Patomac"},"Patomac"),r.a.createElement("option",{value:"Orange County"},"Orange County"),r.a.createElement("option",{value:"Dallas"},"Dallas"),r.a.createElement("option",{value:"Atlanta"},"Atlanta"),r.a.createElement("option",{value:"Beverly Hills",selected:!0},"Beverly Hills")),r.a.createElement("label",{htmlFor:"nameOfHw"},"Name of Housewife:"),r.a.createElement("textarea",{name:"nameOfHw",id:"nameOfHw",placeholder:"nameOfHw",value:this.state.nameOfHw,onChange:function(t){return e.nameOfHwChanged(t.target.value)}}),r.a.createElement("label",{htmlFor:"comment"},"Comment: "),r.a.createElement("input",{type:"text",name:"comment",id:"comment",value:this.state.comment,onChange:function(t){return e.commentChanged(t.target.value)}}),r.a.createElement("div",{className:"addSighting__buttons"},r.a.createElement("button",{type:"reset"},"Cancel"),r.a.createElement("button",{type:"submit"},"Save"))))}}]),t}(n.Component),j=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.restaurants.map(function(e,t){return r.a.createElement("restaurant",Object.assign({},e,{key:t}))});return r.a.createElement("div",{className:"restaurantList"},e)}}]),t}(r.a.Component),k=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=e.map(function(e,t){return r.a.createElement("span",{key:t},e)});return r.a.createElement("div",{className:"Restaurant"},r.a.createElement("h2",null,this.props.name),r.a.createElement("div",{className:"resto__details"},r.a.createElement("div",null,"City: ",this.props.city),r.a.createElement("div",null,"Name of Housewife: ",this.props.nameofhw," "),r.a.createElement("div",null,"Comments: ",this.props.comments)))}}]),t}(r.a.Component),A=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleLogoutClick=function(){y.clearAuthToken()},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderLogoutLink",value:function(){return r.a.createElement("div",{className:"Header__logged-in"},r.a.createElement(d.b,{onClick:this.handleLogoutClick,to:"/"},"Logout"))}},{key:"renderLoginLink",value:function(){return r.a.createElement("div",{className:"Header__not-logged-in"},r.a.createElement(d.b,{to:"/register"},"Register"),r.a.createElement(d.b,{to:"/login"},"Log in"))}},{key:"render",value:function(){return r.a.createElement("nav",{className:"Header"},y.hasAuthToken()?this.renderLogoutLink():this.renderLoginLink())}}]),t}(n.Component);function P(e){return r.a.createElement("div",{className:"landingpage"},r.a.createElement(A,null))}var T=a(11);function L(e){return r.a.createElement("div",{className:"results"},r.a.createElement(j,{restaurants:this.props.restaurants}))}var H=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={date:"",city:"",restaurants:[],restaurant:[],comments:[]},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"addRestaurant",value:function(e){this.setState({restaurants:[].concat(Object(c.a)(this.state.restaurants),[e])})}},{key:"addComment",value:function(e){this.setState({comments:[].concat(Object(c.a)(this.state.comments),[e])})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("main",null,r.a.createElement(T.a,{exact:!0,path:"/",component:P}),r.a.createElement(T.a,{exact:!0,path:"/homepage",component:p}),r.a.createElement(T.a,{exact:!0,path:"/restolist",component:j}),r.a.createElement(T.a,{exact:!0,path:"/restoitem/:restoId",component:k}),r.a.createElement(T.a,{exact:!0,path:"/login",component:O}),r.a.createElement(T.a,{exact:!0,path:"/register",component:N}),r.a.createElement(T.a,{exact:!0,path:"/comment",render:function(t){return r.a.createElement(_,{handleAddComment:function(t){return e.addComment(t)}})}}),r.a.createElement(T.a,{exact:!0,path:"/sighting",render:function(t){return r.a.createElement(C,{handleAddResto:function(t){return e.addRestaurant(t)}})}}),r.a.createElement(T.a,{exact:!0,path:"/search",render:function(t){return r.a.createElement(S,{onSubmit:e.handleSubmit})}}),r.a.createElement(T.a,{exact:!0,path:"/displayresults",render:function(e){return r.a.createElement(L,null)}})))))}}]),t}(n.Component);s.a.render(r.a.createElement(d.a,null,r.a.createElement(H,{restaurants:[{name:"Scarpetta",city:"New York",comment:["loved it","saw Bethany!"],"name of housewife":"Bethany"},{name:"Old Lady Gang",city:"Atlanta",comment:["great food!"],"name of housewife":"Porscha"},{name:"Sur",city:"0.9KB","Beverly Hills":["Tom and Tom were there"],"name of housewife":"Lisa"},{name:"The Brownstone",city:"New Jersey",comment:["Had the steak","Albie was there"],"name of housewife":"Melissa"}]})),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.8a6983d3.chunk.js.map